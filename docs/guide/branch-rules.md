# 分支规范

## 代码分支管理规范（试行）

多人维护的项目，或者多个迭代并行的项目，请遵循如下分支管理规则。

### 分支命名

* 从 `master` 创建 `release` 分支。

* 从 `master` 创建开发分支，命名格式为 'dev_功能名称_日期' ，例如：`dev_payment_20210101`。

### 分支合并

* `master` 分支作为保护分支，避免直接提交代码到 `master` 分支。

* 把开发分支 `dev_xxx_xxx` 合并到 `release` ，并用 `release` 进行构建，测试验收（内网，云测，灰度）。

* 把开发分支 `dev_xxx_xxx` 合并到 `master` ，并用 `master` 进行构建发布（正式环境）。

### 代码同步

* 由于 `master` 分支可能已上线其他并行分支的功能，所以每天必须把 `master` 分支合并到当前正在开发的 `dev_xxx_xxx` 分支，确保当前开发分支总是保持最新的代码。

### 冲突解决

* 代码冲突，必须在本地解决，再推到 gitlab 上。避免直接在 gitlab 上解决冲突，因为 gitlab 上解决冲突会存在代码丢失或被覆盖风险。
